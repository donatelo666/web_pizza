<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registro y contacto</title>
    <!--union con el css, fuentes de google , bootstrap-->
    <link rel="stylesheet" href="/css/estilo_contacto.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lemon&family=Sigmar&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <!--color de fondo-->
    <style>
      body {
        background-color: #dd9c52;
      }
    </style>
  </head>

  <body>
    <!--header con css-->
    <header class="head">
      <p>Contacto, registro y login<br />para ordenar</p>
    </header>
    <!--seccion que contiene un texto con css-->
    <section class="horario">
      <p class="texto2">Horario: viernes, sabado y domingo 4 a 11 pm.</p>
    </section>

    <!--formulario para hacer registro, ruta del backend, metodo , inputs, pattern y notificacion-->
    <section>
      <form id="registroForm" action="/auth/register" method="POST">
        <h2>Registro</h2>
        <input
          type="text"
          name="nombre"
          placeholder="Nombre sin espacios"
          required
          pattern="[A-Za-z0-9]{4,20}"
        />
        <input
          type="password"
          name="password"
          placeholder="Contraseña sin espacios"
          required
          pattern="[A-Za-z0-9]{4,15}"
        />
        <button type="submit">Registrarse</button>
      </form>
      <div id="notificacion" class="oculto"></div>

      <!--formulario para hacer login, ruta del backend, metodo , inputs, pattern y notificacion-->
      <form id="loginForm" action="/auth/login" method="POST">
        <h2>Login</h2>
        <input
          type="text"
          name="nombre"
          placeholder="Nombre"
          required
          pattern="[A-Za-z0-9]{4,20}"
        />
        <input
          type="password"
          name="password"
          placeholder="Contraseña"
          required
          pattern="[A-Za-z0-9]{4,15}"
        />
        <button type="submit">Entrar</button>
      </form>
      <div id="notificacion2" class="oculto"></div>
    </section>

    <!--llamada para los scripts de registro y login-->
    <script src="/js/registro.js"></script>

    <script src="/js/login.js"></script>

    <!--tarjeta con estilos que contiene un texto e imagen con link a wapp , usa archivo css-->
    <div class="container mt-5">
      <div
        class="card mb-3 border-0 fondo-personalizado"
        style="background-color: #59ca68"
      >
        <div class="row g-0">
          <div class="col-md-8">
            <div class="card-body">
              <h2 class="card-text text-center">
                <br />Escribenos por whatsapp para ordenar
              </h2>
            </div>
          </div>
          <div class="col-md-4">
            <a
              href="https://whatsapp.com"
              target="_blank"
              rel="noopener noreferrer"
            >
              <img src="/img/wapp.png" alt="boton wapp" class="wapp" />
            </a>
          </div>
        </div>
      </div>
    </div>
    <!--footer con tres botones que tiene estilos de css-->
    <footer class="footer_contacto">
      <a href="/inicio" class="inicio-btn">Inicio</a>
      <a href="/menu" class="menu-btn">Menu</a>
      <a href="/editar" class="editar-btn" id="editar-btn">Ordenar</a>
    </footer>

    <!--script que escucha el click del boton ordenar ,  notificacion que desaparece
    despues de diez segundos, frena el avance si el usuario no es cliente ni admin -->
    <script>
      function mostrarNotificacion3() {
        const mensaje = `✅ Debes iniciar sesión para ordenar,<br>Si no tienes una cuenta<br> debes registrarte`;
        const notificacion = document.getElementById("notificacion3");
        notificacion.innerHTML = mensaje;
        notificacion.classList.remove("oculto");
        notificacion.classList.add("visible");

        setTimeout(() => {
          notificacion.classList.remove("visible");
          notificacion.classList.add("oculto");
        }, 10000);
      }

      document.getElementById("editar-btn").addEventListener("click", (e) => {
        if (!localStorage.getItem("token")) {
          e.preventDefault(); // ⛔ detiene el comportamiento por defecto (como ir al href)
          mostrarNotificacion3(); // ✅ muestra el mensaje
          return;
        }

        // ✅  para mostrar la pestaña "Ordenar"
        window.location.href = "/editar";
      });
    </script>

    <!-- color de fondo para tarjeta de wapp-->
    <style>
      .fondo-personalizado {
        background-color: #59ca68;
      }
    </style>
    <!--bootstrap-->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>

    <!--notificaciones de registro y login-->
    <div id="notificacion2" class="oculto"></div>

    <div id="notificacion3" class="oculto"></div>
  </body>
</html>
